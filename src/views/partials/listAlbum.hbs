<div class="modal fade" tabindex="-1" id="eliminar">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Eliminar album</h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Esta seguro que quiere eliminar este album?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cerar</button>
        <a class="btn btn-danger" id="modal-delete">Eliminar</a>
      </div>
    </div>
  </div>
</div>

<!-- Table -->

<div class="mt-5">
  <table class="table table-striped" id="table">
    <thead>
      <tr>
        <th scope="col">Album</th>
        <th scope="col">Detalles</th>
        <th scope="col"></th>
        <th scope="col"></th>
        <th scope="col"></th>
        <th scope="col" class="text-center">Acciones</th>
      </tr>
    </thead>

    <tbody>
      {{#each albumes }}
      <tr id="{{id_al}}">
        <td>
          {{titulo_al}}
        </td>
        <td>
          {{genero_al}}
        </td>
        <td>
          {{precio_al}}
        </td>

        <td id="{{fecha_al}}">
          {{timeago fecha_al}}
        </td>
        <td>
          {{numpistas_al}}
        </td>
        <td class="text-center">
          <a class="btn btn-primary mb-1">Agregar canciones</a>
          <button id="{{url_al}}" class="btn btn-primary mb-1 ml-3" data-bs-toggle="modal" data-bs-target="#modal">
            <i class="fa fa-pencil"></i>
          </button>
          <button class="btn btn-danger mb-1 ml-3" data-bs-toggle="modal" data-bs-target="#eliminar">
            <i class="fa fa-trash"></i>
          </button>
        </td>
      </tr>
      {{/each}}
    </tbody>

  </table>
</div>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const tabla = document.getElementById('table');
    const modalDelete = document.getElementById('modal-delete');
    const form = document.getElementById('form-edit');

    const titulom = document.getElementById('titulo-m');
    const fecham = document.getElementById('fecha-m');
    const npistasm = document.getElementById('npistas-m');
    const generom = document.getElementById('genero-m');
    const preciom = document.getElementById('precio-m');
    const urlm = document.getElementById('url-m');

    for (i = 1; i < tabla.rows.length; i++) {
      // Atributos de cada row
      const id = tabla.rows[i].getAttribute('id');
      const titulo = tabla.rows[i].children[0].innerText;
      const genero = tabla.rows[i].children[1].innerText;
      const precio = tabla.rows[i].children[2].innerText;
      const fecha = tabla.rows[i].children[3].getAttribute('id');
      const npistas = tabla.rows[i].children[4].innerText;

      const btnDelete = tabla.rows[i].children[5].children[2];
      const btnEdit = tabla.rows[i].children[5].children[1];

      const url = btnEdit.getAttribute('id');

      btnDelete.onclick = () => {
        modalDelete.setAttribute('href', `/home/addmusic/delete/${id}`);
      }

      btnEdit.onclick = () => {
        titulom.value = titulo;
        fecham.value = fecha;
        npistasm.value = npistas;
        generom.value = genero;
        preciom.value = precio;
        urlm.value = url;
        form.setAttribute('action',`/home/addmusic/edit/${id}`);
      }
    }
  });

</script>